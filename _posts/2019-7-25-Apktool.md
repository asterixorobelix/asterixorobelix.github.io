---
layout: post
title: Inspect android apk files with Apktool
tags: Apktool DexGuard
---
An Android .apk is basically just a fancy zip file. If someone wanted to they could downnload your app, extract it and inspect your source code. [DexGuard](https://www.guardsquare.com/en/blog/setting-up-dexguard-android-studio) is a way to prevent this by obfuscating the code inside your apk.

In order to verify that DexGuard is working, you can use a program like [ApkTool](https://ibotpeaches.github.io/Apktool/) to inspect the assets inside the apk and verify that they have been obfuscated. Although there are [install instructions](https://ibotpeaches.github.io/Apktool/install/), I experienced a few gotchas for using it on my mac.

You download the jar and place it in the ```/usr/local/bin```.
You then need to open a command line window at that ```/bin``` location.
You can then ```java -jar nameOFDownloadedJarInBinFolder``` in order to invoke Apktool. For example, ```java -jar apktool.jar```

One thing to note is that Apktool extracts your jar in the ```/bin``` folder, taking the folder name from the apk name, unless you specify a different folder to extract to.
So, for instance ```$ apktool d bar.apk``` decodes bar.apk to bar folder in the ```/bin``` where apktool.jar is being invoked.

In order to change the output folder: ```apktool d bar.apk -o baz ``` which would decode the bar.apk to the baz folder.
![Obfuscated manifest file](https://drive.google.com/uc?export=view&id=1eDRqoiqpK4ioW0c6pasp7egch5Upl_7O)

A folder with a number of [.smali](https://fileinfo.com/extension/smali) files are created, which contain human readable files (open with vscode etc).
![Obfuscated manifest file](https://drive.google.com/uc?export=view&id=1ZUJ8qIG1F1ow-_xw-MAlwPNqOfpkBmg3)